head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2001.10.18.00.52.48;	author mjd;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Initial revision
@
text
@
package Mod::Fill;
use Exporter;
@@EXPORT = 'fill';
@@ISA = 'Exporter';

sub fill {
  my ($self, $text, $width, $leader) = @@_;
  $leader = '' unless defined $leader;
  $width ||= $self->{width};

  # Hold paragraph so far and current line
  my ($p, $l) = ('', $leader);

  my @@words = split /\s+/, $text;

 WORD:
  for my $w (@@words) {
    if (length($w) >= $width) {
      # special case for long words
      $p .= $l . "\n";
      $p .= $w . "\n";
      $l = '';
      next WORD;
    }
    if (length($w) + length($l) + 1 <= $width) {
      $l .= ' ' if $l ne '';
      $l .= $w;
    } else {
      $p .= $l . "\n";
      $l = $leader;
      redo WORD;
    }
  }

  $p .= $l . "\n" unless $l eq $leader;
  return $p;
}

1;
@
